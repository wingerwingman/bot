look at all the code and fix or update anything as needed. after put what you fixed under your bot version like gemini 3 pro (high), gemini 3 pro (low), claude 4.5 etc. you are in botperformance.txt but do not delete anything from that file just add to it.


Gemini 3 pro (high) and (low)
### Spot Bot
- [x] **Verified Pause Persistence**: Updated `trading_bot.py` to save/load `paused` state. Ensure bot remains paused after restart.
- [x] **Check Allocated Capital**: Verified `allocated_capital` usage in `calculate_position_size`.
- [x] **UI Log Noise Reduction**: Filtered out `DEBUG` logs from the `ListHandler` in `logger_setup.py`. This ensures the web UI's Error/Activity list isn't flooded with debug info.

### Grid Bot
- [x] **Enforce Capital Allocation**: Updated `server.py` to check `capital_manager.get_available('grid')` before starting Grid Bot in Live mode. Prevents using more than allocated budget.
- [x] **Pause Persistence**: Updated `grid_bot.py` to save/load `paused` state.
- [x] **Grid Bot Loop Safety**: Verified `grid_bot.py` run loop correctly handles `paused` state by skipping order checks but maintaining the active loop.

### General
- [x] **Consistency in Paper Trading UI**: Updated `LiveDashboard.js` to mention "Live/Paper" in the idle card, clarifying that simulations are also tracked there if active.

gemini 3 pro (flash)
### Spot Bot
- [x] **Improved Server Resilience**: Replaced `sys.exit(0)` with `RuntimeError` in `trading_bot.py` when insufficient funds are detected. This prevents the entire multi-bot server from crashing if a single bot fails to initialize.
- [x] **Dynamic Settings Adjustment**: Expanded `/api/config/update` and the UI to allow adjusting RSI, Stop Loss, Trailing Stop, Position Size, and Advanced filters **on the fly** while the bot is running.

### Grid Bot
- [x] **Fixed Profit Calculation**: Resolved a double-counting bug in `grid_bot.py` where profit was being added on both Buy and Sell fills. Profit is now correctly realized only on Sells.
- [x] **Accurate Fee Tracking**: Updated the profit logic to correctly estimate and subtract cycle fees (Buy + Sell fees) from the realized PnL.
- [x] **Bound Validation**: Added API validation in `server.py` to ensure `lower_bound < upper_bound`.
- [x] **Dynamic Grid Updates**: Implemented `update_config` for the Grid Bot. Users can now adjust Bounds, Levels, and Capital while live. The bot automatically cancels old orders and re-places them to match the new configuration.

### UI Improvements
- [x] **Live Adjustment Controls**: Enabled settings sliders and added "‚ú® Apply Changes" buttons to both Spot and Grid control panels, allowing for seamless real-time optimization.

Gemini 2.0 Flash Thinking
### Server & System
- [x] **Thread Safety**: Implemented explicit locking in `server.py`'s `find_spot_bot` helper. This protects against race conditions when accessing the shared bot registry during high-frequency concurrent requests (e.g., starting a bot while polling status).
- [x] **Grid Bot Memory Optimization**: Capped the `filled_orders` history list in `grid_bot.py` to the last 100 items. This prevents unbounded memory growth during long-running grid sessions, ensuring the server stays lightweight.

### Feature Implementation
- [x] **Dynamic Grid Rebalancing (#20)**: Implemented full support for auto-rebalancing in `grid_bot.py`.
    - **Logic**: The bot now monitors price every cycle. If price exits the configured bounds (by >0.5%), it automatically resets the grid, re-centering the range around the *new* price while maintaining the same spread percentage.
    - **Persistence**: Added `auto_rebalance_enabled` and `rebalance_count` to state saving/loading.
    - **UI**: Added a "‚öñÔ∏è Dynamic Rebalancing" toggle switch to the Grid Bot Panel. This can be toggled on/off live via the "Apply Changes" button.

Antigravity
### Feature Implementation
- [x] **Consecutive Streak Tracking (#5)**: Implemented win/loss streak counters in `trading_bot.py`. Logic updates on every sell to track momentum. Added `max_win_streak` and `max_loss_streak` to performance reports.
- [x] **Daily Telegram Summary (#24)**: Created a scheduled task in `server.py` that runs at 8:00 AM daily. It aggregates trade performance from `trade_journal.json` and sends a detailed HTML report via Telegram.
- [x] **Volatility-Based Grid Spacing (#4)**: Enhanced Grid Bot to optionally use market volatility (ATR) to determine grid width and levels during rebalancing.
    - **Logic**: Added `volatility_spacing_enabled` flag. When rebalancing is triggered, it calls `calculate_auto_range` to dynamically resize the grid instead of just shifting it.
    - **UI**: Added "üåä Volatility-Based Spacing" toggle to `GridBotPanel.js` which is fully adjustable while the bot is running.
    - **API**: Updated `start` and `config/update` endpoints to support the new volatility and rebalancing flags dynamically.
- [x] **Paper Trading Mode Fix (#30)**: Resolved critical crash in `trading_bot.py` where paper trading (live data, simulated orders) would fail due to missing CSV filename. Bot now correctly switches between backtest loop (CSV) and live loop (Ticker) based on mode.
- [x] **Unified Metrics Tracking**: Centralized trade statistics (PnL, Drawdown, Streaks) into `update_metrics` helper. This ensures consistency between backtest, paper, and live trading reports.
- [x] **Adjustable Advanced Strategy Filters**: Fixed a bug in `ControlPanel.js` that was preventing M-TF trend, Volume Confirmation, and SL Cooldown from being adjusted while the bot was running. These are now fully hot-swappable in real-time.
- [x] **Dashboard Visibility for Win Tracking**: Added "üî• Max Win Streak" and "üßä Max Loss Streak" stats to the `LiveDashboard.js` and `ControlPanel.js` performance cards. Users can now see their consecutive performance at a glance.
- [x] **Volatility Spacing Bug Fix**: Resolved a critical UI bug where "Volatility-Based Spacing" would revert while running. Fixed key mismatches in the status poll and reinforced backend persistence.
